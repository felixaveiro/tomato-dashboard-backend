/advice/on-detection:
  post:
    tags:
      - Advice
    summary: Create advice on a detection
    description: Create a new advice based on a detection. Only AGRONOMISTs can perform this action.
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AdviceOnDetectionInput'
    responses:
      '201':
        description: Advice created successfully
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Advice'
      '400':
        description: Invalid input data
      '401':
        description: Unauthorized
      '403':
        description: Only agronomists can create advice

/advice/on-medicine:
  post:
    tags:
      - Advice
    summary: Create advice on a medicine
    description: Create a new advice linked directly to a medicine (without detection). Only AGRONOMISTs can perform this action.
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AdviceOnMedicineInput'
    responses:
      '201':
        description: Advice created successfully
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Advice'
      '400':
        description: Invalid input data
      '401':
        description: Unauthorized
      '403':
        description: Only agronomists can create advice

/advice:
  get:
    tags:
      - Advice
    summary: Get all advices
    description: Retrieves all advices with basic detection info.
    security:
      - bearerAuth: []
    responses:
      '200':
        description: List of advices
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/Advice'
      '401':
        description: Unauthorized

/advice/{id}:
  get:
    tags:
      - Advice
    summary: Get advice by ID
    description: Retrieves a single advice by its ID.
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: Advice ID
    responses:
      '200':
        description: Advice found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Advice'
      '404':
        description: Advice not found
      '401':
        description: Unauthorized

  put:
    tags:
      - Advice
    summary: Update advice
    description: Update an existing advice. Only AGRONOMISTs can update.
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: Advice ID
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AdviceOnDetectionInput'
    responses:
      '200':
        description: Advice updated successfully
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Advice'
      '403':
        description: Unauthorized to update this advice
      '404':
        description: Advice not found

  delete:
    tags:
      - Advice
    summary: Delete advice
    description: Delete an advice by ID. Only AGRONOMISTs or ADMINs can delete.
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: Advice ID
    responses:
      '200':
        description: Advice deleted successfully
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                  example: true
                message:
                  type: string
                  example: Advice deleted successfully
      '403':
        description: Not authorized to delete this advice
      '404':
        description: Advice not found
/advice/detection/{detectionId}:
  get:
    tags:
      - Advice
    summary: Get all advices for a specific detection
    description: Retrieves all advice entries related to the specified detection ID.
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: detectionId
        schema:
          type: string
        required: true
        description: Detection ID to fetch advice for
    responses:
      '200':
        description: List of advices for the detection
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/Advice'
      '401':
        description: Unauthorized
      '404':
        description: No advice found for this detection
